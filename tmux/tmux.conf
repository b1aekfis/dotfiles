# Settings
run-shell 'zsh_path=$(command -v zsh | head -n1); [ -n "$zsh_path" ] && tmux set-option -g default-shell "$zsh_path"'

set -g default-terminal "xterm-256color"
set -ga terminal-overrides ",xterm-256color:Tc"
setw -g mode-keys vi
set -g update-environment "HYPRLAND_INSTANCE_SIGNATURE"

# Keybindings
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

bind r source-file ~/.config/tmux/tmux.conf \; display "Reloaded!"

bind ^ split-window -h -c "#{pane_current_path}"
bind C new-window -c "#{pane_current_path}"

if-shell '[ "$(uname)" = "Linux" ]' \
  "bind o run-shell 'xdg-open \"#{pane_current_path}\" >/dev/null 2>&1 & disown'" \
  "bind o run-shell 'open \"#{pane_current_path}\"'"

bind -r g display-popup -d '#{pane_current_path}' -w80% -h80% -E lazygit

# Statusline
set -g mode-style fg=#adb8b8,bg=#073642

set -g message-style fg=#adb8b8,bg=default
set -g message-command-style fg=#adb8b8,bg=default

set -g pane-border-style fg=#073642
set -g pane-active-border-style fg=#073642

set -g status "on"
set -g status-interval 1
set -g status-justify "left"

set -g status-left-length "100"
set -g status-right-length "100"

set -g status-style fg=#586e75,bg=default

set -g status-left "#[fg=#15161e,bg=#93a1a1] #P.#I.#S #[fg=#93a1a1,bg=#657b83]#[fg=#002b37,bg=#657b83] #(whoami) #[fg=#657b83,bg=default]"
set -g status-right "#[fg=#93a1a1,bg=default]#[fg=#15161e,bg=#93a1a1] #h "

setw -g window-status-style fg=#657b83,bg=default
setw -g window-status-activity-style fg=#657b83,bg=default
setw -g window-status-separator ""

setw -g window-status-format '  #[fg=#15161e,bg=#56635f] #I #[fg=#56635f,bg=#2e3700] #[fg=default,bg=#2e3700] #{b:pane_current_path} #[fg=#2e3700,bg=default]'
setw -g window-status-current-format '  #[fg=#15161e,bg=#93a1a1] #I #[fg=#93a1a1,bg=#596600] #[fg=#eee8d5,bg=#596600] #{b:pane_current_path} #[fg=#596600,bg=default]'
